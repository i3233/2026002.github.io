<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‚æ•°æ¨¡æ¿ - é¤é¥®</title>
    <link rel="stylesheet" href="../../css/Main.css">
    <style>
        .attr-template-page {
            padding: var(--spacing-lg);
            background-color: var(--color-neutral-50);
        }
        .card {
            background-color: #ffffff;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-card);
            padding: var(--spacing-lg);
            width: 1200px;
        }
        .card-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-medium);
            color: var(--color-text-primary);
            margin: 0 0 var(--spacing-md) 0;
        }
        .spec-table {
            width: 100%;
            border-collapse: collapse;
            font-size: var(--font-size-sm);
        }
        .spec-table th,
        .spec-table td {
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--color-neutral-200);
            text-align: left;
        }
        .spec-table th {
            background: var(--color-neutral-50);
            font-weight: var(--font-weight-medium);
        }
        .spec-table input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid var(--color-neutral-300);
            border-radius: 4px;
            box-sizing: border-box;
        }
        .spec-table .col-setting {
            min-width: 220px;
            white-space: nowrap;
        }
        .spec-table .col-delete {
            width: 48px;
            text-align: center;
        }
        .setting-cell {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            flex-wrap: nowrap;
        }
        .setting-cell label {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: var(--font-size-sm);
            font-weight: normal;
            cursor: pointer;
        }
        .setting-cell input[type="radio"] {
            width: auto;
        }
        .setting-limit-wrap {
            display: none;
            align-items: center;
            gap: 4px;
        }
        .setting-limit-wrap.visible {
            display: inline-flex;
        }
        .setting-limit-wrap .setting-limit-input {
            width: 56px;
            padding: 4px 6px;
            border: 1px solid var(--color-neutral-300);
            border-radius: 4px;
            font-size: var(--font-size-sm);
        }
        .spec-add-row {
            margin-top: var(--spacing-sm);
        }
        .spec-add-row .btn-link {
            color: var(--color-primary);
            background: none;
            border: none;
            cursor: pointer;
            font-size: var(--font-size-sm);
            padding: 0;
        }
        .spec-add-row .btn-link:hover {
            text-decoration: underline;
        }
        .btn-delete {
            background: none;
            border: none;
            color: var(--color-error);
            cursor: pointer;
            padding: 4px;
            line-height: 1;
        }
        .btn-delete:hover {
            opacity: 0.8;
        }
        .card-foot {
            margin-top: var(--spacing-lg);
            display: flex;
            justify-content: flex-end;
        }
        .choose-setting {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm) 0;
        }
        .choose-setting label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }
        .choose-setting .choose-input {
            width: 56px;
            padding: 6px 8px;
            border: 1px solid var(--color-neutral-300);
            border-radius: 4px;
            font-size: var(--font-size-base);
            text-align: center;
        }
        .choose-setting .choose-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }
    </style>
</head>
<body>
    <div class="attr-template-page">
        <div class="card">
            <h2 class="card-title">å‚æ•°</h2>
            <div class="choose-setting">
                <label>ä¸‹è¾¹å•†å“ä¸º</label>
                <input type="number" class="choose-input" id="chooseTotal" min="1" value="1" placeholder="å‡ ">
                <span>é€‰</span>
                <input type="number" class="choose-input" id="chooseCount" min="1" value="1" placeholder="å‡ ">
                <label>ï¼ˆå¯å¡«æ•°å­—ï¼Œè¡¨ç¤ºå‡ é€‰å‡ ï¼‰</label>
            </div>
            <table class="spec-table">
                <thead>
                    <tr>
                        <th>è§„æ ¼åç§°</th>
                        <th>åŠ ä»·</th>
                        <th>æˆæœ¬</th>
                        <th class="col-setting">è®¾å®š</th>
                        <th class="col-delete">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="paramTableBody">
                    <tr>
                        <td><input type="text" class="spec-name" placeholder="è§„æ ¼åç§°"></td>
                        <td><input type="number" class="spec-price" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td><input type="number" class="spec-cost" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td class="col-setting"><div class="setting-cell"><label><input type="radio" name="param_setting_0" value="required" checked> å¿…é€‰</label><label><input type="radio" name="param_setting_0" value="limited"> é™é‡</label><span class="setting-limit-wrap"><input type="number" class="setting-limit-input" min="1" value="1"> ä»½</span></div></td>
                        <td class="col-delete"><button type="button" class="btn-delete" title="åˆ é™¤">ğŸ—‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="spec-name" placeholder="è§„æ ¼åç§°"></td>
                        <td><input type="number" class="spec-price" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td><input type="number" class="spec-cost" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td class="col-setting"><div class="setting-cell"><label><input type="radio" name="param_setting_1" value="required" checked> å¿…é€‰</label><label><input type="radio" name="param_setting_1" value="limited"> é™é‡</label><span class="setting-limit-wrap"><input type="number" class="setting-limit-input" min="1" value="1"> ä»½</span></div></td>
                        <td class="col-delete"><button type="button" class="btn-delete" title="åˆ é™¤">ğŸ—‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="spec-name" placeholder="è§„æ ¼åç§°"></td>
                        <td><input type="number" class="spec-price" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td><input type="number" class="spec-cost" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td class="col-setting"><div class="setting-cell"><label><input type="radio" name="param_setting_2" value="required" checked> å¿…é€‰</label><label><input type="radio" name="param_setting_2" value="limited"> é™é‡</label><span class="setting-limit-wrap"><input type="number" class="setting-limit-input" min="1" value="1"> ä»½</span></div></td>
                        <td class="col-delete"><button type="button" class="btn-delete" title="åˆ é™¤">ğŸ—‘</button></td>
                    </tr>
                    <tr>
                        <td><input type="text" class="spec-name" placeholder="è§„æ ¼åç§°"></td>
                        <td><input type="number" class="spec-price" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td><input type="number" class="spec-cost" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>
                        <td class="col-setting"><div class="setting-cell"><label><input type="radio" name="param_setting_3" value="required" checked> å¿…é€‰</label><label><input type="radio" name="param_setting_3" value="limited"> é™é‡</label><span class="setting-limit-wrap"><input type="number" class="setting-limit-input" min="1" value="1"> ä»½</span></div></td>
                        <td class="col-delete"><button type="button" class="btn-delete" title="åˆ é™¤">ğŸ—‘</button></td>
                    </tr>
                </tbody>
            </table>
            <div class="spec-add-row">
                <button type="button" class="btn-link" id="paramAddRowBtn">+ æ·»åŠ </button>
            </div>
            <div class="card-foot">
                <button type="button" class="btn btn-primary" id="paramConfirmBtn">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script>
        (function () {
            var tbody = document.getElementById('paramTableBody');
            var rowIndex = 4;

            function getSettingCellHtml(name) {
                return '<td class="col-setting"><div class="setting-cell">' +
                    '<label><input type="radio" name="' + name + '" value="required" checked> å¿…é€‰</label>' +
                    '<label><input type="radio" name="' + name + '" value="limited"> é™é‡</label>' +
                    '<span class="setting-limit-wrap"><input type="number" class="setting-limit-input" min="1" value="1"> ä»½</span></div></td>';
            }

            function bindSettingRadios(cell) {
                var radios = cell.querySelectorAll('input[type="radio"]');
                var limitWrap = cell.querySelector('.setting-limit-wrap');
                radios.forEach(function (radio) {
                    radio.addEventListener('change', function () {
                        if (this.value === 'limited') {
                            limitWrap.classList.add('visible');
                        } else {
                            limitWrap.classList.remove('visible');
                        }
                    });
                });
            }

            function createRow() {
                var name = 'param_setting_' + (rowIndex++);
                var tr = document.createElement('tr');
                tr.innerHTML = '<td><input type="text" class="spec-name" placeholder="è§„æ ¼åç§°"></td>' +
                    '<td><input type="number" class="spec-price" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>' +
                    '<td><input type="number" class="spec-cost" placeholder="0" value="0" step="0.01" min="0"> å…ƒ</td>' +
                    getSettingCellHtml(name) +
                    '<td class="col-delete"><button type="button" class="btn-delete" title="åˆ é™¤">ğŸ—‘</button></td>';
                bindSettingRadios(tr.querySelector('.setting-cell'));
                tr.querySelector('.btn-delete').addEventListener('click', function () {
                    if (tbody.querySelectorAll('tr').length <= 1) return;
                    tr.remove();
                });
                return tr;
            }

            document.getElementById('paramAddRowBtn').addEventListener('click', function () {
                tbody.appendChild(createRow());
            });

            document.getElementById('paramConfirmBtn').addEventListener('click', function () {
                alert('ç¡®å®šï¼ˆç¤ºä¾‹ï¼šå¯åœ¨æ­¤ä¿å­˜å‚æ•°æ•°æ®ï¼‰');
            });

            tbody.querySelectorAll('.btn-delete').forEach(function (btn) {
                btn.addEventListener('click', function () {
                    var row = this.closest('tr');
                    if (tbody.querySelectorAll('tr').length <= 1) return;
                    row.remove();
                });
            });

            tbody.querySelectorAll('.setting-cell').forEach(function (cell) {
                bindSettingRadios(cell);
            });
        })();
    </script>
</body>
</html>
